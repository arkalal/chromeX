document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("api-key-input"),t=document.getElementById("save-api-key"),s=document.getElementById("api-status");function n(e,t){s.textContent=e,s.className="api-status "+t,"success"===t&&setTimeout(()=>{s.textContent="",s.className="api-status"},3e3)}chrome.runtime.sendMessage({action:"getApiKey"},function(t){t&&t.apiKey&&(e.value=t.apiKey,n("API key configured","success"))}),t.addEventListener("click",function(){const t=e.value.trim();t?t.startsWith("sk-")?chrome.runtime.sendMessage({action:"saveApiKey",apiKey:t},function(e){e&&e.success?n("API key saved successfully","success"):n("Failed to save API key","error")}):n('API key should start with "sk-"',"error"):n("Please enter a valid API key","error")})});